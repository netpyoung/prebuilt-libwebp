name: test linux wasm

on: [push]

jobs:
  upload_asset_linux_wasm:
    name: Upload Asset on Linux (wasm)
    # ref: availabel image - https://github.com/actions/runner-images
    runs-on: ubuntu-latest
    steps:
      # https://github.com/actions/checkout
      - name: Checkout
        uses: actions/checkout@v5

      - name: Install Dependency
        run: |
          sudo apt update
          sudo apt install -y git python3 cmake build-essential

      # https://github.com/mymindstorm/setup-emsdk
      - name: Setup emsdk
        uses: mymindstorm/setup-emsdk@v14
        with:
          actions-cache-folder: 'emsdk-cache'

      - name: Run Buildscript
        run: ./build-on-linux-wasm.sh

      # https://github.com/actions/upload-artifact
      - name: ğŸâ« Upload Artifact
        uses: actions/upload-artifact@v4
        with:
          name: artifact-wasm
          path: lib/wasm/
          if-no-files-found: error
          retention-days: 1
          compression-level: 0